!function(){function a(a,b){return new ReplitClient("api.repl.it",80,"java",{time_created:b,msg_mac:a})}function b(a,b){return a.concat("\n","public class Main { ","public static void main(String[] args) { ","new ",b,"().main(args);"," }}")}function c(a){return a.replaceAll("public class","class")}function d(a){var b="";return $(a.split("\n")).each(function(a,c){b=b.concat(c).concat("<br/>")}),b}function e(a){return a&&0===a.trim().length}function f(a){a.text(""),a.show(),a.parent().show()}function g(a){a=a.replaceAll("\r","").replaceAll("\n","").replaceAll("\t","");var b=/(public)?\s+class\s+(.+?)\s*{.*void\s+?main/.exec(a);if(b)return b[2]}function h(a){return $(a).html().replaceAll("<p>","\n").replaceAll("</p>","")}new Promise(function(b,c){$.get("/repl/token",function(c){var d=a(c.msgMac,c.timeCreated);b(d)}).fail(function(){c()})}).then(function(b){return new Promise(function(c,d){b.connect().then(function(){$(".replit-toggle").show(),c(b)},function(){$.get("/repl/token/update",function(b){var d=a(b.msgMac,b.timeCreated);d.connect().then(function(){$(".replit-toggle").show(),c(d)})})})})}).then(function(a){$(".evaluate-code").on("click",function(){var h=$(this).closest(".markdownEditor"),i=h.find(".replit-editor").attr("id"),j=ace.edit(i),k=j.getSession().getValue(),l=h.find(".editor-console"),m=g(k);return m?("Main"!=m&&(k=c(k),k=b(k,m)),f(l),void a.evaluate(k,{stdout:function(a){l.removeClass("console-error"),a=a.replaceAll("\n","<br/>"),e(a)&&l.append("<br/>"),l.append(a)}}).then(function(a){var b=a.error;b&&(l.addClass("console-error"),b=b.replaceAll("Main.java:",m+".java:"),l.append(d(b))),a.data&&l.append(a.data)})):(l.addClass("console-error"),f(l),void l.text("Couldn't find main method"))})}),$(".answerSubmit").on("click",function(a){a.preventDefault(),$("#answered-code").val(editor.getSession().getValue()),$(".showOpenAnswer").submit()}),$(".replit-editor").each(function(a,b){$(b).html(h(b));var c="editor_"+a;if($("#"+c).length){var d=ace.edit(c);d.setTheme("ace/theme/eclipse"),d.getSession().setMode("ace/mode/java")}})}();